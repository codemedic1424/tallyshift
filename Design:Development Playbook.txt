# TallyShift iOS Design + Development Playbook (Single Source of Truth)

**Audience:** Chris + Logan  
**Primary goal:** Ship an iOS-first v1 that matches the website promises **without** overbuilding.  
**Working branch reality:** All iOS work branches from `app_dev` (not `main`).

---

## 1) Product scope

### v1 (Option A) — What we will ship first
**Core value:** Log shifts fast, track tips accurately, and show simple monthly insights.

**Must-have capabilities**
- Shift logging (start/end, role, location/section, notes)
- Tip tracking: **cash + card**
- Hours calculation + totals
- “This Month” summary (total tips, shifts count, avg tips/shift, effective hourly)
- Day-of-week breakdown (counts + avg tips)
- Apple-native navigation: **List → Detail push**
- Add/Edit via **sheet** + Save validation
- Swipe actions: Delete (confirm) + Duplicate
- Local-first persistence: **SwiftData**

### Not in v1 (queued close behind)
**v1.1 (Option B):** Calendar prefill (“Next Shift”)
- Request calendar permission
- Select event → prefill shift date/time/hours

**v1.2 (Option C):** Weather
- Weather UI stub first (non-blocking)
- Weather API + caching later
- Weather breakdown / basic insights later

---

## 2) Apple-fied design rules

These are “defaults” unless there’s a very good reason to deviate.

### Interaction patterns
- iPhone: `NavigationStack` (push detail)
- Add/Edit: `.sheet`
- Destructive: `confirmationDialog` or destructive button role
- Row actions: `swipeActions` (Delete / Duplicate)

### Visual language
- SF Symbols only (for now)
- Semantic colors: `.primary`, `.secondary`, `.tint`, `.tertiary` (avoid hard-coded grays)
- Spacing scale: **8 / 12 / 16 / 24**
- Rounded corners: **12–18**
- Dark Mode supported by default
- Dynamic Type friendly

### Component standards
Reusable components (keep them consistent):
- `ShiftRow`
- `TipBadge`
- `MetricChip`
- `ThisMonthSummaryCard`
- `DayOfWeekBreakdownCard`
- `EmptyStateView`
- (Future) `WeatherCard` stub

---

## 3) Data model spec (v1)

### Shift fields
- `start: Date`
- `end: Date`
- `role: String`
- `location/section: String`
- `notes: String`
- `cashTips: Decimal`
- `cardTips: Decimal`

### Computed values (no duplicate state)
- `durationHours` (derived from start/end)
- `totalTips` (cash + card)
- `dayOfWeekSymbol` (for breakdown)

**Why this matters:** It keeps your “source of truth” clean and reduces bugs.

---

## 4) GitHub Projects board rules (so it stops feeling chaotic)

### Column meanings (confidence-based)
- **Backlog**: Not started OR not understood OR not currently prioritized
- **Ready**: You can explain it and implement it next (no major unknowns)
- **In Progress**: Active work on a branch/PR (or active learning)
- **Review**: Needs Logan feedback/QA before merging
- **Done**: Merged OR documented understanding you can defend

### Naming convention (recommended)
- `Feature:` real product deliverables
- `Design:` UI/UX decisions, visual system
- `Learning:` confidence-building work
- `Setup:` repo/tooling/infrastructure
- `QA:` review gates

### Current board note
Your existing card **“Feature: Tip Tracking System #4”** is a great starting point. If it feels too big, split it into smaller cards like:
- `Feature: Tip inputs (cash + card)`
- `Feature: Tip totals + TipBadge display`
- `Feature: Monthly summary math`

---

## 5) Branching + PR workflow (aligned to your repo)

### Branching truth
- `app_dev` is your base for iOS.
- All feature work branches from **`app_dev`**.

### Branch naming
- `feature/tip-tracking-mvp`
- `feature/swiftdata-persistence`
- `feature/monthly-summary`
- `design/ui-system`

### Momentum workflow (the simplest version)
1. Move card → **In Progress**
2. Create branch from `app_dev`
3. Make **small** commits
4. Open a **Draft PR** early
5. Link PR to the Project card
6. Review → merge → Done

**Rule:** Keep **In Progress** to 3 cards max.

---

## 6) The linear phased plan (what to do, in order)

### Phase 0 — Align + Stabilize (1 week)
**Goal:** Establish consistent UI + shared understanding.
- Keep UI Playground as a design validation tool
- Document design rules (this doc)
- Decide what “earnings” means in v1 (tips-only vs tips+wage). Default: **tips-only**

**Exit criteria**
- Everyone agrees on v1 scope and design rules

### Phase 1 — Core screens + tip tracking (2–4 weeks)
**Goal:** End-to-end MVP flow.
- Shift List → Detail push
- Add Shift sheet with validation
- Tip inputs (cash + card)
- Tip totals + TipBadge in list/detail
- Swipe actions (delete + duplicate)

**Exit criteria**
- You can log a shift in < 15 seconds
- Tips display correctly everywhere

### Phase 2 — Insights (1–2 weeks)
**Goal:** Match the website’s “earnings + insight” promise.
- “This Month” summary totals
- Effective hourly
- Avg tips/shift
- Day-of-week breakdown

**Exit criteria**
- A user logs shifts and immediately sees useful monthly insights

### Phase 3 — SwiftData persistence (1–3 weeks)
**Goal:** Local-first, Apple-fied reliability.
- Convert model(s) to SwiftData (`@Model`)
- Replace in-memory store with fetch/add/delete
- Stress tests (empty, 100+ shifts, edits)

**Exit criteria**
- Data persists between app launches

### Phase 4 — Beta polish + TestFlight (2–4 weeks)
**Goal:** Make it feel premium and trustworthy.
- Accessibility labels
- Dark Mode & Dynamic Type pass
- Subtle animations + light haptics
- TestFlight internal beta (3–5 testers)

**Exit criteria**
- Beta feedback incorporated, no major crashes

### Phase 5 — App Store deployment (2–3 weeks)
**Goal:** Ship.
- App icon + screenshots (iPhone)
- Privacy copy (local-first)
- Submission checklist + publish

**Exit criteria**
- v1 live in App Store

### v1.1 / v1.2 (Queued)
- Calendar prefill (B)
- Weather UI stub → API integration (C)

---

## 7) PR template (use this every time)

**Title:** Feature: <what>

**What this PR does**
- …

**Why this approach**
- …

**Scope / non-goals**
- …

**How to test**
1. …

**Review focus**
- …

---

## 8) Talking points for Logan (so you feel confident)

Use these when Logan asks “why”:
- “We’re shipping iOS-first v1 with **local-first SwiftData** so we can move fast and stay Apple-native.”
- “Tips are stored as **cash + card** for clarity; totals are computed to avoid duplicate state.”
- “The playground is a **design validation tool**; it compiles and sets the UI direction, but we’re moving features into Ready only when we can explain them.”
- “We’re keeping v1 small (Option A). Calendar and Weather are queued so they don’t block shipping.”
- “Our Kanban columns represent **confidence and workflow**, not wishful completion.”

---

## 9) Immediate next actions (today)

1. Keep **Feature: Tip Tracking System #4** in **Backlog** or **In Progress** (depending on confidence).
2. Create a smaller sub-card: **Feature: TipBadge + totals**.
3. Create branch from `app_dev`: `feature/tip-tracking-mvp`.
4. Make one tiny commit (TipBadge or tip totals) and open a Draft PR.

---

## 10) Definition of Done (v1)

v1 is done when:
- You can add a shift quickly
- Tips are accurate and visible in list + detail
- Monthly summary is correct and readable
- Data persists (SwiftData)
- App is Apple-fied: Dark Mode, Dynamic Type, accessibility basics
- TestFlight feedback is addressed

